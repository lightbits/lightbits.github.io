<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Retrospective 59 minutes</title>
	<link rel="stylesheet" href="http://folk.ntnu.no/simeh/style.css">
	<!-- <link rel="shortcut icon" href="http://folk.ntnu.no/simeh/favicon.png" type="image/png" /> -->
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
</head>

<body>

	<div id="main">

		<div id="title">
			<h1>Retrospective 59 Minutes</h1>
			<h2>Adventures in computer programming</h2>
		</div>

		<div id="pages">
			<a href="http://folk.ntnu.no/simeh/">top</a>
			 / 
			<a href="http://folk.ntnu.no/simeh/about">about</a>
			 / 
			<a href="http://folk.ntnu.no/simeh/projects" class="active_page">[projects]</a>
			 / 
			<a href="http://folk.ntnu.no/simeh/stuff">stuff</a>
			 / 
			<a href="http://folk.ntnu.no/simeh/blog">blog</a>
		</div>

		<div id="content">
		<div class="project">

			<h1>Riemann Snake</h1>

			<img src="./screenshot0.png" width="700"></img>

			<p>This is my first 3D game, written using C++ and OpenGL. I went for a simple gameplay, but it ended up being complicated after all.</p>

			<p>You control the snake with the arrow keys, around the sphere. Pick up apples to grow longer and avoid enemies to increase your score.</p>

			<h2>Nerdy details</h2>
			<h3>Spherical movement</h3>
			<p>I spent a while figuring out movement along the sphere. I first tried spherical coordinates, with a velocity for the horizontal and vertical angle. This did not give the kind motion I wanted - it was very unintuitive.</p> 

			<p>So I dropped this and looked back at my notes on physics, and remembered the sentripetal acceleration of a particle in a circular orbit <code>a = - dot(v, v) / r</code>.</p>

			<p>To use this I work with positions in world space. The player's acceleration is specified in tangent space, which gives intuitive motion. To transform back to world space I form a tangent frame from the player's velocity, the sphere normal and the cross product of these as the bitangent.</p>

			<p>The camera follows the player by using the <code>glm::lookAt</code> function, with the player's velocity as the up-vector, and position at player offset by a scaled normal.</p>

			<h3>Shaders</h3>
			The wireframe rendering actually uses a special shader, which is described <a href="http://codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/">here</a>. By storing the barycentric coordinates with each vertex attribute, we can calculate how close to the edge we are, using the <code>fwidth()</code> function, and color accordingly.

			<h2>Audio</h2>
			The sound effects were created with the <a href="http://www.bfxr.net/">bfxr</a> tool, and the bgm was made with <a href="http://pxtone.haru.gs/">pxTone</a>. This was my first time making music for a video game, and it went as you can tell -_-'.

			<h2>Downloads</h2>
			<p>You may have to download and install the Visual C++ Redistributable for Visual Studio 2012 x86, <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30679">here</a>.</p>
			<p>Windows binary: <a href="https://dl.dropboxusercontent.com/u/27844576/Releases/riemannsnake_windows.7z">riemannsnake_windows.7z</a></p>
			<p>Linux binary: <a href="https://dl.dropboxusercontent.com/u/27844576/Releases/riemannsnake_windows.7z">riemannsnake_linux.7z</a></p>

			<h2>Code</h2>
			<p>The code for the project can be found on Github: <a href="https://github.com/lightbits/riemannsnake">https://github.com/lightbits/riemannsnake</a></p>
		</div>
		</div>
	</div>
</body>
</html>